@model EnglishExamOnline.Shared.ViewModels.ContestScheduleVm

@{
    ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container" style=" background-color: white; box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px; padding: unset; width: 60%">
    <hr class="bg-primary" style=" height: 10px; border-width: 0;">
    <div class="row justify-content-md-center">
        <div class="col-md-10" style="text-align:center">
            <h3>Cập nhật lịch thi</h3>
            <hr style="width:100%;text-align:left;margin-left:0">
        </div>
    </div>
    <div class="row justify-content-md-center">
        <div class="col-md-8">
            <form asp-action="Edit">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-group">
                    <input asp-for="ContestScheduleId" type="hidden" class="form-control" />
                </div>
                <div class="form-group">
                    <label asp-for="StartTime" class="control-label"></label>
                    <input asp-for="StartTime" class="form-control" id="dateStart" onchange="validationDate()"/>
                    <span class="text-danger" id="dateError"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Length" class="control-label"></label>
                    <select asp-for="Length" class="form-control">
                        <option value="90">60 phút</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="submit" value="Cập nhật" class="btn btn-primary" id="btnSubmit"/>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    function validationDate() {
        var dateString = document.getElementById('dateStart').value;
        var myDate = new Date(dateString);
        var dateMin = new Date();
        var dateMax = new Date();

        dateMin.setDate(dateMin.getDate() + 5);
        dateMax.setDate(dateMax.getDate() + 30);

        if (myDate >= dateMin && myDate < dateMax) {
            document.getElementById('dateError').innerHTML = "";
            document.getElementById("btnSubmit").disabled = false;
            return true;
        }
        document.getElementById('dateError').innerHTML = "Lịch thi phải cách ngày hôm nay (không được nhỏ hơn) tối thiểu 5 ngày và không vượt quá 30 ngày để thí sinh có thể đăng ký!";
        document.getElementById("btnSubmit").disabled = true;
        return false;
    }
</script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
